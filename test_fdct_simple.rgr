; Test FDCT class with int_buffer

class FDCT {
    ; Cosine table: cos((2*x+1) * u * pi / 16) * 1024
    def cosTable:int_buffer
    
    Constructor () {
        ; Allocate fixed-size buffer
        cosTable = (int_buffer_alloc 64)
        
        ; Just set a few values to test
        int_buffer_set cosTable 0 1024
        int_buffer_set cosTable 1 1004
        int_buffer_set cosTable 2 946
        int_buffer_set cosTable 3 851
    }
    
    fn test:void () {
        def val0:int (int_buffer_get cosTable 0)
        def val1:int (int_buffer_get cosTable 1)
        print ("Value 0: " + (to_string val0))
        print ("Value 1: " + (to_string val1))
    }
}

class Main {
    sfn m@(main):void () {
        def f (new FDCT())
        f.test()
    }
}
