{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Ranger",
  "scopeName": "source.ranger",
  "patterns": [
    { "include": "#comments" },
    { "include": "#strings" },
    { "include": "#numbers" },
    { "include": "#annotations" },
    { "include": "#class-definition" },
    { "include": "#function-definition" },
    { "include": "#constructor" },
    { "include": "#control-keywords" },
    { "include": "#declaration-keywords" },
    { "include": "#top-level-keywords" },
    { "include": "#types" },
    { "include": "#built-in-functions" },
    { "include": "#operators" },
    { "include": "#constants" },
    { "include": "#identifiers" }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.semicolon.ranger",
          "match": ";.*$"
        }
      ]
    },
    "strings": {
      "patterns": [
        {
          "name": "string.quoted.double.ranger",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            {
              "name": "constant.character.escape.ranger",
              "match": "\\\\."
            }
          ]
        }
      ]
    },
    "numbers": {
      "patterns": [
        {
          "name": "constant.numeric.float.ranger",
          "match": "\\b\\d+\\.\\d+\\b"
        },
        {
          "name": "constant.numeric.integer.ranger",
          "match": "\\b\\d+\\b"
        }
      ]
    },
    "annotations": {
      "patterns": [
        {
          "name": "entity.other.attribute-name.ranger",
          "match": "@\\s*\\([^)]*\\)",
          "captures": {
            "0": { "name": "entity.other.attribute-name.ranger" }
          }
        }
      ]
    },
    "class-definition": {
      "patterns": [
        {
          "match": "\\b(class|extension|systemclass)\\s+([A-Za-z_][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "storage.type.class.ranger" },
            "2": { "name": "entity.name.type.class.ranger" }
          }
        }
      ]
    },
    "function-definition": {
      "patterns": [
        {
          "match": "\\b(fn|sfn)\\s+([A-Za-z_][A-Za-z0-9_]*)(@\\s*\\([^)]*\\))?\\s*(:)\\s*([A-Za-z_][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "storage.type.function.ranger" },
            "2": { "name": "entity.name.function.ranger" },
            "3": { "name": "entity.other.attribute-name.ranger" },
            "4": { "name": "punctuation.separator.type.ranger" },
            "5": { "name": "entity.name.type.ranger" }
          }
        },
        {
          "match": "\\b(fn|sfn)\\s+([A-Za-z_][A-Za-z0-9_]*)",
          "captures": {
            "1": { "name": "storage.type.function.ranger" },
            "2": { "name": "entity.name.function.ranger" }
          }
        }
      ]
    },
    "constructor": {
      "patterns": [
        {
          "name": "keyword.declaration.constructor.ranger",
          "match": "\\bConstructor\\b"
        }
      ]
    },
    "control-keywords": {
      "patterns": [
        {
          "name": "keyword.control.ranger",
          "match": "\\b(if|if!|else|while|for|switch|case|default|break|continue|return|throw|try|end)\\b"
        }
      ]
    },
    "declaration-keywords": {
      "patterns": [
        {
          "name": "keyword.declaration.ranger",
          "match": "\\b(def|let|new|Extends)\\b"
        }
      ]
    },
    "top-level-keywords": {
      "patterns": [
        {
          "name": "keyword.other.ranger",
          "match": "\\b(Import|Enum|operators|templates)\\b"
        }
      ]
    },
    "types": {
      "patterns": [
        {
          "name": "storage.type.primitive.ranger",
          "match": ":\\s*(int|double|string|boolean|char|charbuffer|void)\\b"
        },
        {
          "name": "storage.type.ranger",
          "match": "\\b(int|double|string|boolean|char|charbuffer|void)\\b"
        }
      ]
    },
    "built-in-functions": {
      "patterns": [
        {
          "name": "support.function.ranger",
          "match": "\\b(print|push|itemAt|array_length|set|get|has|keys|remove|remove_array_at|indexOf|slice|strlen|substring|charAt|at|strsplit|trim|startsWith|endsWith|contains|replace|to_uppercase|to_lowercase|join|to_int|to_double|to_string|to_charbuffer|str2int|str2double|sin|cos|tan|asin|acos|sqrt|floor|ceil|fabs|random|read_file|write_file|file_exists|dir_exists|create_dir|null\\?|!null\\?|unwrap|wrap|sha256|md5|error_msg)\\b"
        }
      ]
    },
    "operators": {
      "patterns": [
        {
          "name": "keyword.operator.comparison.ranger",
          "match": "(==|!=|<=|>=|<|>)"
        },
        {
          "name": "keyword.operator.logical.ranger",
          "match": "(&&|\\|\\||!)"
        },
        {
          "name": "keyword.operator.arithmetic.ranger",
          "match": "(\\+|-|\\*|/|%)"
        },
        {
          "name": "keyword.operator.assignment.ranger",
          "match": "="
        },
        {
          "name": "keyword.operator.elvis.ranger",
          "match": "\\?\\?"
        },
        {
          "name": "keyword.operator.ternary.ranger",
          "match": "\\?"
        }
      ]
    },
    "constants": {
      "patterns": [
        {
          "name": "constant.language.boolean.ranger",
          "match": "\\b(true|false)\\b"
        },
        {
          "name": "constant.language.null.ranger",
          "match": "\\b(null|nil)\\b"
        },
        {
          "name": "constant.language.math.ranger",
          "match": "\\bM_PI\\b"
        }
      ]
    },
    "identifiers": {
      "patterns": [
        {
          "name": "variable.other.ranger",
          "match": "\\b[A-Za-z_][A-Za-z0-9_]*\\b"
        }
      ]
    }
  }
}
